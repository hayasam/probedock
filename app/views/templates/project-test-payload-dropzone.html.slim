.panel.panel-default.test-payload-dropzone
  .panel-heading
    h3.panel-title Publish test report
  .panel-body

    p
      ' You may manually publish standard xUnit XML test reports here.
      ' Select the project version and optionally a test category,
      ' then drop your generated xUnit report file into the box below.

    form

      project-version-select prefix='test-payload-dropzone' project='project' model-object='uploadParams' create-new='true' auto-select='true'

      / category selection
      .form-group
        label for='test-report-category' Category

        / check box to choose whether to create a new category or not
        label.new-switch.pull-right
          input type='checkbox' ng-model='formConfig.newCategory' ng-disabled='!categories.length'
          '
          ' create a new category

        / dropdown menu to select an existing category
        ui-select#test-report-category ng-if='!formConfig.newCategory' ng-model='uploadParams.category'
          ui-select-match placeholder='Category' allow-clear='true' {{ $select.selected.name }}
          ui-select-choices repeat='category.name as category in categories | filter: $select.search'
            span ng-bind-html='category.name | highlight: $select.search'

        / free input field to create a new category
        input.form-control type='text' ng-if='formConfig.newCategory' ng-model='uploadParams.category'



      / file drop zone
      .dropzone ng-show='formConfig.uploadEnabled'



      / success message
      p.text-success ng-if='success'
        ' Your payload was accepted and will be processed shortly.

      / error message
      p.text-danger ng-if='error'
        strong ng-if='!serverError'
          ' {{ error }}
        strong ng-if='serverError'
          ' Your payload was refused.

          / button to display the details of an unexpected server response
          button.btn.btn-danger.btn-xs.pull-right ng-click='showErrorDetails()'
            span.glyphicon.glyphicon-question-sign
            '  More details
